{{extend 'layout.html'}}

{{include 'solver_web/t_includes.html'}}

<title>Super Metroid VARIA Randomizer Tracker</title>

<style>
{{include 'solver_web/t_style.html'}}

.help {
    cursor: pointer;
    position: absolute;
    z-index: 2;
    width: 2.5%;
    height: 3.75%;
    top: 0.5%;
    left: 2.75%;
}
.titleItem {
    position: absolute;
    z-index: 2;
    width: 10%;
    height: 3.75%;
    top: 5.25%;
    left: 6%;
    color: #ffffff;
    font-size: 1.25vw;
    font-weight: bold;
}
.startItem {
    cursor: pointer;
    position: absolute;
    z-index: 2;
    width: 2.5%;
    height: 3.75%;
    top: 4.75%;
    left: 10.5%;
}
.repeatItem {
    cursor: pointer;
    position: absolute;
    z-index: 2;
    width: 2.5%;
    height: 3.75%;
    top: 4.75%;
    left: 13.25%;
}
.binItem {
    cursor: pointer;
    position: absolute;
    z-index: 2;
    width: 2.5%;
    height: 3.75%;
    top: 4.75%;
    left: 16%;
}
</style>

<script type="text/javascript">
var globalPlando = false;

function initCurMode() {
  document.getElementById("mode").value = "seedless";
}

{{include 'solver_web/t_js.html'}}

//-----------------------------------------------------------
// TUTORIAL

function startTheTour(step=-1) {
  // the tour tutorial
  var tour = new Tour({
    storage: false,
    steps: [{
      element: "#help",
      title: "VARIA Areas/Bosses & Items Tracker",
      content: "<h2 class=\"center\">Welcome to the VARIA Areas/Bosses & Items Tracker</h2><h4>Areas/Bosses Tracker</h4>\
<p>The Areas and Bosses Tracker allows you to track the connections between the areas and bosses portals.<br/>To use it, click on a portal <img src=\"/solver/static/images/portal.png\" alt=\"Portal\" style=\"width: 20px\">, it'll highlight it, then click on a second portal, it'll draw a line between the two portals.<br/>\
You can delete the latest added transition with the <img src=\"/solver/static/images/repeat.svg\" alt=\"Cancel Last\" style=\"width: 32px\"> button and all of them with the <img src=\"/solver/static/images/bin.svg\" alt=\"Remove all\" style=\"width: 32px\"> button.<br/>\
You can also click on the portal <img src=\"/solver/static/images/portal.png\" alt=\"Portal\" style=\"width: 20px\"> of an existing transition and click on the <img src=\"/solver/static/images/repeat.svg\" alt=\"Cancel Last\" style=\"width: 32px\"> button to delete it.<br/>\
Only the locations of connected areas/bosses are computed by the Items Tracker (as such if the ROM is not Areas/Bosses randomized the vanilla transitions will be automatically added).<br/>\
There's three portal types that you can't mix: Area portals: <img src=\"/solver/static/images/portal.png\" alt=\"Portal\" style=\"width: 20px\">, Boss portals: <img src=\"/solver/static/images/portal_boss.png\" alt=\"Boss Portal\" style=\"width: 20px\">, Escape portals: <img src=\"/solver/static/images/portal_escape.png\" alt=\"Escape Portal\" style=\"width: 20px\"> (active only in Area Plandomizer)</p>\
<h4>Items Tracker</h4>\
<p>The Items Tracker allows you to use the Solver in interactive mode.<br/>To use it, click on the <img src=\"/solver/static/images/play.svg\" alt=\"Start\" style=\"width: 32px\"> button to upload your ROM and choose your preset (like on the Solver page).<br/>Then the available locations will be displayed on the map, click on a location after you've collected the item of the location in the game, it'll update the next available locations.<br/>The color of the icon on the available locations matchs the difficulty to reach the location:<table><tr><td><img src=\"/solver/static/images/marker_easy.gif\" alt=\"easy\" style=\"width: 32px; background-color: #000;\"> easy</td><td><img src=\"/solver/static/images/marker_medium.gif\" alt=\"medium\" class=\"diffHelp\"> medium</td></td><td><img src=\"/solver/static/images/marker_hard.gif\" alt=\"hard\" class=\"diffHelp\"> hard</td></tr><tr><td><img src=\"/solver/static/images/marker_harder.gif\" alt=\"harder\" class=\"diffHelp\"> very hard</td><td><img src=\"/solver/static/images/marker_hardcore.gif\" alt=\"hardcore\" class=\"diffHelp\"> hardcore</td><td><img src=\"/solver/static/images/marker_mania.gif\" alt=\"mania\" class=\"diffHelp\"> mania</td></tr><tr><td colspan=\"3\"><img src=\"/solver/static/images/marker_break.png\" alt=\"break\" class=\"diffHelp\"> sequence break</td></tr></table>The locations not available are displayed with the Sequence Break icon, allowing you to collect them when you sequence break.<br/>When a location has been visited its icon displays the collected item: <img src=\"/solver/static/images/marker_visited_easy_Gravity.png\" alt=\"Visited\" style=\"width: 32px\"> or this if no item was found: <img src=\"/solver/static/images/marker_visited_easy.png\" alt=\"Visited\" style=\"width: 32px\">, one color for each difficulty.<br/>When overing the mouse cursor on an available location a tooltip is displayed with the location's name, the techniques and items used to access it.<br/>After the location has been visited only the collected item is displayed.<br/>The locations availability are computed from the current access point which is displayed with this icon: <img src=\"/solver/static/images/gps.png\" alt=\"last access point\" style=\"width: 32px\"></p>\
<h4>Touch screen tablette mode</h4>\
<p>You can use the tracker on your touch screen tablette without a ROM file, aka seed less mode, to start using it leave the \"Randomized Super Metroid ROM\" input empty after clicking on the <img src=\"/solver/static/images/play.svg\" alt=\"Start\" style=\"width: 32px\"> button.<br/>When clicking on a location a popup will be displayed allowing you to tell the Solver which item you collected in the game.<br/>By default all the vanilla transitions are loaded, you can delete them with the <img src=\"/solver/static/images/bin.svg\" alt=\"Remove all\" style=\"width: 32px\"> button.</p>\
<h4>Auto Save</h4>\
<p>The tracker feature an auto save functionnality, so you can do your seed in multiple seatings.<br/>The different status icons of the auto save:<table><tr><td><img src=\"/solver/static/images/refresh.svg\" style=\"width: 32px\"> Loading in progress</td><td><img src=\"/solver/static/images/checkmark.svg\" style=\"width: 32px\"> Save ok</td></tr><tr><td><img src=\"/solver/static/images/cloud_upload.png\" style=\"width: 32px\"> Upload in progress</td><td><img src=\"/solver/static/images/cloud_download.svg\" style=\"width: 32px\"> Download in progress</td></tr><tr><td colspan=\"2\"><img src=\"/solver/static/images/warning.svg\" style=\"width: 32px\"> Something wrong happened (try reloading the page)</td></tr></table></p><p>You can display this help again by clicking on the <img src=\"/solver/static/images/help.svg\" alt=\"help\" style=\"width: 32px\"> button.</p>\
<h4>Thanks to</h4>\
<p><ul><li>Animated location icons by Djlo</li><li>Location icons from Alli_Cat's <a href='https://github.com/allibear17/Super-Metroid-Location-Tracker' target=\"_blank\">Location Tracker</a></li><li>G4 sprite from Crossproduct's <a href=\"https://www.twitch.tv/crossproduct\" target=\"_blank\">smrandohelper</a></li><li>Action icons from <a href='https://dryicons.com/icon-packs/stylistica-icons-set' target=\"_blank\">Dryicons</a></li></ul></p>"
    }]
  });

  // Initialize the tour
  tour.init();

  // Start the tour
  if(step != -1) {
    tour.goTo(step);
  }
  tour.start();
}

function onloadHook() {}
</script>

<div class="fixed">
  <div class="menu">
    <table class="full menuTable">
      <tr>
	<td>{{=A("Home", _href=URL(f="home"), _class="menu")}}</td>
	<td>{{=A("Presets", _href=URL(f="presets"), _class="menu")}}</td>
	<td>{{=A("Randomizer", _href=URL(f="randomizer"), _class="menu")}}</td>
	<td>{{=A("Solver", _href=URL(f="solver"), _class="menu")}}</td>
	<td class="menu_selected">{{=A("Tracker", _href=URL(f="tracker"), _class="menu")}}</td>
	<td>{{=A("Plandomizer", _href=URL(f="plando"), _class="menu")}}</td>
	<td>{{=A("Customizer", _href=URL(f="customizer"), _class="menu")}}</td>
	<td>{{=A("Statistics", _href=URL(f="extStats"), _class="menu")}}</td>
	<td>{{=A("Information & Contact", _href=URL(f="infos"), _class="menu")}}</td>
      </tr>
    </table>
  </div>
</div>

<div class="main">
{{include 'solver_web/t_main.html'}}

    <!-- item tracker buttons -->
    <div id="titleItem" class="titleItem">ITEM</div>
    <div id="startItem" class="startItem"><img src="/solver/static/images/play.svg" alt="Start" onclick="displayPopup(false)" data-toggle="tooltip" title="Start the Interactive Solver" data-placement="bottom" data-container="body" data-html="true"></div>
    <div id="repeatItem" class="repeatItem"><img src="/solver/static/images/repeat.svg" alt="Cancel Last" onclick="deleteLoc(false)" data-toggle="tooltip" title="Remove last visited location" data-placement="bottom" data-container="body" data-html="true" id="repeatItemImg"></div>
    <div id="binItem" class="binItem"><img src="/solver/static/images/bin.svg" alt="Clear" onclick="clearLocs(false)" data-toggle="tooltip" title="Remove all visited locations" data-placement="bottom" data-container="body" data-html="true"></div>

    <div id="help" class="help"><img src="/solver/static/images/help.svg" alt="Help" onclick="startTheTour(0)" data-toggle="tooltip" title="Display the help" data-placement="bottom" data-container="body" data-html="true"></div>

  </div>

  <!-- info on current loaded seed -->
  <p class="white">Current Seed:</p>
  <input type="text" name="cur_seed" id="cur_seed" value="n/a" readonly class="full">
  <p class="white">Current Preset:</p>
  <input type="text" name="cur_preset" id="cur_preset" value="n/a" readonly class="full">
</div>
